<div ng-controller="record:view" class="row">
  <div class="col-md-12">

    <h1>{{ recordType }} #{{ guid }}</h1>
    <p>Delete this {{ recordType }}: <span ng-click="deleteRecord()" class="glyphicon glyphicon-remove">&nbsp;</span></p>

    <ul>
      <li ng-repeat="(key, value) in record" ng-if="key == 'userGuid'"><a href="/#/person/{{ value }}"><strong>{{ key }}: </strong>{{ value }}</a></li>
      <li ng-repeat="(key, value) in record" ng-if="key != 'data' && key != 'userGuid'"><strong>{{ key }}: </strong>{{ value }}</li>
    </ul>

    <table class="table table-striped table-hover">

      <thead>
        <tr>
          <th>Key</th>
          <th>Value</th>
        </tr>
      </thead>

      <tbody ng-repeat="(key, value) in record.data">
        <tr>
          <td><span ng-click="deleteAttribute(key)" class="glyphicon glyphicon-remove">&nbsp;</span> {{ key }}</td>
          <td>
            <form ng-submit="updateAttribute(key)">
              <span class="glyphicon glyphicon-edit">&nbsp;</span><input ng-model="record.data[key]" type="text" style="width:90%" >
            </form>
          </td>
        </tr>
      </tbody>

    </table>

    <div class="row">
      <form class="form-horizontal" ng-submit="addAttribute()">
        <div class="col-md-12">
          <h3>Add a key:</h3>
        </div>

        <div class="col-md-5">
          <label class="control-label">Key</label>
          <input type="text" class="form-control" id="newKey" placeholder="firstName" ng-model="newAttribute.key">
        </div>

        <div class="col-md-5">
          <label class="control-label">Value</label>
          <input type="text" class="form-control" id="newKey" placeholder="firstName" ng-model="newAttribute.value">
        </div>

        <div class="col-md-1">
          <label class="control-label">&nbsp;</label>
          <button type="submit" class="form-control btn btn-primary">Add</button>
        </div>

      </form>
    </div>

  </div>
</div>
